{% extends 'base.html' %}

{% block title %}Shopping Cart - E-Commerce Store{% endblock %}

{% block content %}
<div class="py-5">
  <div class="container">
    <div class="row">
    <h1 class="text-center mb-2">ðŸ›’ Shopping Cart</h1>
    <p class="text-center text-muted mb-5">Review your items before checkout</p>
    {%include 'flash_messages.html'%}

   <!-- Order Summary -->
      <div class="col-lg-4">
        <div class="card p-4">
          <h4 class="fw-semibold mb-3">Order Summary</h4>
         
          <div class="d-flex justify-content-between mb-2 text-muted">
            <span>Subtotal</span>
            <span id="subtotal">${{"%.2f" | format(total_price)}}</span>
          </div>
          <div class="d-flex justify-content-between mb-2 text-muted">
            <span>Tax (8%)</span>
            <span id="tax">${{"%.2f"| format(total_price * 0.08)}}</span>
          </div>
          <div class="d-flex justify-content-between mb-4">
            <strong>Total</strong>
            <strong id="total">${{"%.2f" | format(total_price * 1.08)}}</strong>
          </div>
          <button class="btn btn-success w-100 py-2 fw-semibold" >
            <a href="/checkout" class="checkout-btn">Checkout</a>
          </button>
        </div>
      </div>
    </div>
   

    <div class="row g-4">
  
      <!-- Cart Items -->
       {%for item in cart_items%}
      <div class="col-lg-8">
        <div id="cart-items" class="card p-4">
            <div class="card mb-3" style="max-width: 540px;">
                <div class="row g-0">
                    <div class="col-md-4">
                    <img src={{item['itemImageUrl']}} class="img-fluid rounded-start" alt="...">
                    </div>
                    <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title"><b>{{item['itemName']}}</b></h5>
                        <p class="text-success fw-bold fs-5">${{item['itemPrice']}}</p>
                        <p class="card-text"><b>Discount:</b> {{item['itemDiscountPrice']}}</p>
                        <p class="'card-text"><b>Quantity:</b> {{item['itemCount']}}</p>
                    </div>
                    </div>
                </div>

                  <button type="button" class="btn btn-outline-secondary remove-from-cart-btn"
                    data-item-name="{{item['itemName']}}"
                    data-item-id="{{item['itemId']}}"
                    data-item-sku="{{item['itemSku']}}"
                    data-item-price="{{item['itemPrice']}}"
                    data-item-discount-price="{{item['itemDiscountPrice']}}"
                    data-item-image-url="{{item['itemImageUrl']}}">Remove
                  </button>
            </div>
        </div>
      </div>
      {%endfor%}

    </div>
  </div>
</div>
<script type="text/javascript" src="{{url_for('static', filename='script.js')}}"></script>
{% endblock %}